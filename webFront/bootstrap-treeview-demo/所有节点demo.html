<!DOCTYPE html>
<html>

	<head>
		<link href="//cdn.bootcss.com/bootstrap/3.3.7/css/bootstrap.css" rel="stylesheet">
		<link href="//cdn.bootcss.com/bootstrap-treeview/1.2.0/bootstrap-treeview.min.css" rel="stylesheet">
		<script src="//cdn.bootcss.com/jquery/3.1.1/jquery.min.js"></script>
		<link href="//cdn.bootcss.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet">
		<script src="//cdn.bootcss.com/bootstrap-treeview/1.2.0/bootstrap-treeview.min.js"></script>
		<meta charset="utf-8" />
		<title></title>
		<script type="text/javascript">
			function getTree() {     // Some logic to retrieve, or generate tree structure    
				var tree = [{
					text: "Parent 1",
					state: {
						checked: true
					},
					nodes: [{
						text: "Child 1",
						nodes: [{
							text: "Grandchild 1"
						}, {
							text: "Grandchild 2"
						}]
					}, {
						text: "Child 2"
					}]
				}, {
					text: "Parent 2"
				}, {
					text: "Parent 3"
				}, {
					text: "Parent 4"
				}, {
					text: "Parent 5"
				}];
				return tree;
			}

			function getAllParentNode() {
				debugger;

				var parent1 = $('#treeview-checkable').treeview('getNode', 0);
				var parent2 = $('#treeview-checkable').treeview('getSiblings', 0);

			}

			function submit() {
				var arr = new Array();
				var $tree = $('#treeview-checkable');
				var test = $('#treeview-checkable').treeview('getNode', 0);
				arr = $tree.treeview('getChecked', 0);
				var fristArr = new Array();
				var secondArr = new Array();
				var thirdArr = new Array();
				var fourthArr = new Array();
				if(arr.length == 0) {
					alert("请选择节点");
					return;
				}
				for(var i = 0; i < arr.length; i++) {
					var node = arr[i];
					var temp = $('#treeview-checkable').treeview('getNode', node.nodeId);
					var href = node.href;
					if(href.indexOf("root") > -1) {
						var v = 2;
						continue;
					} else {
						if(node.parentId == 0) {
							fristArr.push(href);
						} else {
							if(($tree.treeview('getNode', node.parentId)).parentId == 0) {
								secondArr.push(href);
							} else if($tree.treeview('getNode', ($tree.treeview('getNode', node.parentId)).parentId).parentId == 0) {
								thirdArr.push(href);
							} else {
								fourthArr.push(href);
							}
						}
					}
				}
				debugger;
			};
		</script>
	</head>

	<body>
		<div id="treeview-checkable" class=""></div>
		<button type="button" class="btn btn-primary" onclick="getAllParentNode()">OK</button>
	</body>
	<script type="text/javascript">
		$(function() {
			function init(tree) {
				var $checkableTree = $('#treeview-checkable').treeview({
					data: tree,
					showIcon: false,
					showCheckbox: true,
					showTags: true,
					bootstrap2: false,
					levels: 5,
					onNodeSelected: function(event, node) {
						debugger;
						$('#treeview-checkable').treeview('toggleNodeChecked', [node, {
							silent: true
						}]);
					},
				});

				var findCheckableNodess = function() {
					return $checkableTree.treeview('search', [$('#input-check-node').val(), {
						ignoreCase: false,
						exactMatch: false
					}]);
				};
				var checkableNodes = findCheckableNodess();

				// Check/uncheck/toggle nodes  
				$('#input-check-node').on('keyup', function(e) {
					checkableNodes = findCheckableNodess();
					$('.check-node').prop('disabled', !(checkableNodes.length >= 1));
				});

				$('#btn-check-node.check-node').on('click', function(e) {
					$checkableTree.treeview('checkNode', [checkableNodes, {
						silent: $('#chk-check-silent').is(':checked')
					}]);
				});

				$('#btn-uncheck-node.check-node').on('click', function(e) {
					$checkableTree.treeview('uncheckNode', [checkableNodes, {
						silent: $('#chk-check-silent').is(':checked')
					}]);
				});

				$('#btn-toggle-checked.check-node').on('click', function(e) {
					$checkableTree.treeview('toggleNodeChecked', [checkableNodes, {
						silent: $('#chk-check-silent').is(':checked')
					}]);
				});

				// Check/uncheck all  
				$('#btn-check-all').on('click', function(e) {
					$checkableTree.treeview('checkAll', {
						silent: $('#chk-check-silent').is(':checked')
					});
				});

				$('#btn-uncheck-all').on('click', function(e) {
					$checkableTree.treeview('uncheckAll', {
						silent: $('#chk-check-silent').is(':checked')
					});
				});
			}
			//			$.ajax({
			//				type: 'post',
			//				url: '/init.do',
			//				success: function(data) {
			//					init(data);
			//				}
			//			});
			init(getTree());
		});
	</script>

</html>